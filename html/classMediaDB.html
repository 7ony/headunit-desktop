<!-- HTML header for doxygen 1.8.8-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <!-- For Mobile Devices -->
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
        <meta name="generator" content="Doxygen 1.8.11"/>
        <script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
        <title>Hedunit-Desktop: MediaDB Class Reference</title>
        <!--<link href="tabs.css" rel="stylesheet" type="text/css"/>-->
        <script type="text/javascript" src="dynsections.js"></script>
        <link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
        <link href="doxygen.css" rel="stylesheet" type="text/css" />
        <link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
        <link href='https://fonts.googleapis.com/css?family=Roboto+Slab' rel='stylesheet' type='text/css'>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css">
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/js/bootstrap.min.js"></script>
        <script type="text/javascript" src="doxy-boot.js"></script>
    </head>
    <body>
        <nav class="navbar navbar-default" role="navigation">
            <div class="container">
                <div class="navbar-header">
                    <a class="navbar-brand">Hedunit-Desktop </a>
                </div>
            </div>
        </nav>
        <div id="top"><!-- do not remove this div, it is closed by doxygen! -->
            <div class="content" id="content">
                <div class="container">
                    <div class="row">
                        <div class="col-sm-12 panel " style="padding-bottom: 15px;">
                            <div style="margin-bottom: 15px;">
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-attribs">Static Public Attributes</a> &#124;
<a href="classMediaDB-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">MediaDB Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Database abstraction class, used to fetch and insert/update data to/from the media library's SQLITE database.  
 <a href="classMediaDB.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="mediadb_8h_source.html">mediadb.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for MediaDB:</div>
<div class="dyncontent">
<div class="center"><img src="classMediaDB__inherit__graph.png" border="0" usemap="#MediaDB_inherit__map" alt="Inheritance graph"/></div>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for MediaDB:</div>
<div class="dyncontent">
<div class="center"><img src="classMediaDB__coll__graph.png" border="0" usemap="#MediaDB_coll__map" alt="Collaboration graph"/></div>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:ae7263037c6703d8e7c7adad301403242"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMediaDB.html#ae7263037c6703d8e7c7adad301403242">ListType</a> { <br />
&#160;&#160;<b>albums</b>, 
<b>artists</b>, 
<b>genres</b>, 
<b>playlists</b>, 
<br />
&#160;&#160;<b>songs</b>
<br />
 }<tr class="memdesc:ae7263037c6703d8e7c7adad301403242"><td class="mdescLeft">&#160;</td><td class="mdescRight">Contains all the possible list types that we can fetch from the database (albums,artists,genres)  <a href="classMediaDB.html#ae7263037c6703d8e7c7adad301403242">More...</a><br /></td></tr>
</td></tr>
<tr class="separator:ae7263037c6703d8e7c7adad301403242"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a824005492136de37c06c04dd6f0474b7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMediaDB.html#a824005492136de37c06c04dd6f0474b7">MediaDB</a> (QObject *parent=0)</td></tr>
<tr class="memdesc:a824005492136de37c06c04dd6f0474b7"><td class="mdescLeft">&#160;</td><td class="mdescRight">The constructor opens the SQLITE DB file and checks if all the tables are created, if not it creates them.  <a href="#a824005492136de37c06c04dd6f0474b7">More...</a><br /></td></tr>
<tr class="separator:a824005492136de37c06c04dd6f0474b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad0dc39033efc3827c11d4816405cda04"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMediaDB.html#ad0dc39033efc3827c11d4816405cda04">addLocation</a> (QString name, QString v_unique_id, QString v_path, QString relative_path)</td></tr>
<tr class="memdesc:ad0dc39033efc3827c11d4816405cda04"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks if a location already exits in the database and if not then adds the location to the database.  <a href="#ad0dc39033efc3827c11d4816405cda04">More...</a><br /></td></tr>
<tr class="separator:ad0dc39033efc3827c11d4816405cda04"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a92c75270322cb73cbb468a1d592cd095"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMediaDB.html#a92c75270322cb73cbb468a1d592cd095">addScannedFolder</a> (int location_id, QString name, QString relative_path, qint64 last_modified, QString thumbnail)</td></tr>
<tr class="memdesc:a92c75270322cb73cbb468a1d592cd095"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks if a folder is in the database if not then adds it to the DB.  <a href="#a92c75270322cb73cbb468a1d592cd095">More...</a><br /></td></tr>
<tr class="separator:a92c75270322cb73cbb468a1d592cd095"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adf0ee613d999b16821693f1a4a77f3e6"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMediaDB.html#adf0ee613d999b16821693f1a4a77f3e6">addMediaFiles</a> (QVariantList filenames, QVariantList folder_id, QVariantList media_types, QVariantList artist, QVariantList title, QVariantList album, QVariantList genre)</td></tr>
<tr class="separator:adf0ee613d999b16821693f1a4a77f3e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2ffc4c0a0aa8a800b86a7a5752d65704"><td class="memItemLeft" align="right" valign="top">QVariantMap&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMediaDB.html#a2ffc4c0a0aa8a800b86a7a5752d65704">getLocationInfo</a> (int location_id)</td></tr>
<tr class="memdesc:a2ffc4c0a0aa8a800b86a7a5752d65704"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fetches the info for the location that matches location_id.  <a href="#a2ffc4c0a0aa8a800b86a7a5752d65704">More...</a><br /></td></tr>
<tr class="separator:a2ffc4c0a0aa8a800b86a7a5752d65704"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aae363c424571e52b6f4aee2aa976cb12"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMediaDB.html#aae363c424571e52b6f4aee2aa976cb12">updateFolderInfo</a> (int folder_id, bool hasAudio, bool hasVideo, QString thumbnail)</td></tr>
<tr class="memdesc:aae363c424571e52b6f4aee2aa976cb12"><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates the has_audio, has_video and thumbnail fields for the folder matched by folder_id.  <a href="#aae363c424571e52b6f4aee2aa976cb12">More...</a><br /></td></tr>
<tr class="separator:aae363c424571e52b6f4aee2aa976cb12"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac2a2eac810025752bd8daec019d0a417"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMediaDB.html#ac2a2eac810025752bd8daec019d0a417">setLocationAvailability</a> (int location_id, bool isAvailable)</td></tr>
<tr class="memdesc:ac2a2eac810025752bd8daec019d0a417"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the availability of location_id to isAvailable.  <a href="#ac2a2eac810025752bd8daec019d0a417">More...</a><br /></td></tr>
<tr class="separator:ac2a2eac810025752bd8daec019d0a417"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a013254caf712e65c99e51a7d46e0cb36"><td class="memItemLeft" align="right" valign="top">QVariantList&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMediaDB.html#a013254caf712e65c99e51a7d46e0cb36">getLocations</a> (bool onlyAvailable)</td></tr>
<tr class="separator:a013254caf712e65c99e51a7d46e0cb36"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b6f7a12d03a68aced1f112e4cb439b4"><td class="memItemLeft" align="right" valign="top">QVariantList&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMediaDB.html#a2b6f7a12d03a68aced1f112e4cb439b4">getListFromQuery</a> (QSqlQuery q)</td></tr>
<tr class="separator:a2b6f7a12d03a68aced1f112e4cb439b4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1d86a641a8f9650874782ce5c88f680d"><td class="memItemLeft" align="right" valign="top">QVariantMap&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMediaDB.html#a1d86a641a8f9650874782ce5c88f680d">getListWithFirstLetterFromQuery</a> (QSqlQuery q)</td></tr>
<tr class="separator:a1d86a641a8f9650874782ce5c88f680d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af4148bffdd4a45a6712643fc109daf30"><td class="memItemLeft" align="right" valign="top">QVariantMap&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMediaDB.html#af4148bffdd4a45a6712643fc109daf30">getMediaFolders</a> (int mediaType)</td></tr>
<tr class="separator:af4148bffdd4a45a6712643fc109daf30"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3d5f173f59152f8946f8f20055646121"><td class="memItemLeft" align="right" valign="top">QVariantMap&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMediaDB.html#a3d5f173f59152f8946f8f20055646121">getFolderContent</a> (int folder_id, int mediaType)</td></tr>
<tr class="separator:a3d5f173f59152f8946f8f20055646121"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3121d1f7cc78d63aa9e1f6bb2468c6e7"><td class="memItemLeft" align="right" valign="top">QVariantMap&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMediaDB.html#a3121d1f7cc78d63aa9e1f6bb2468c6e7">getAlbumContent</a> (QString album)</td></tr>
<tr class="separator:a3121d1f7cc78d63aa9e1f6bb2468c6e7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a324db8f8d66f0901539b8f9b310b0a2c"><td class="memItemLeft" align="right" valign="top">QVariantMap&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMediaDB.html#a324db8f8d66f0901539b8f9b310b0a2c">getPlaylists</a> ()</td></tr>
<tr class="separator:a324db8f8d66f0901539b8f9b310b0a2c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab32bf04bcd405c375b33dee4ba0c7c38"><td class="memItemLeft" align="right" valign="top">QVariantMap&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMediaDB.html#ab32bf04bcd405c375b33dee4ba0c7c38">getAudioFiles</a> ()</td></tr>
<tr class="separator:ab32bf04bcd405c375b33dee4ba0c7c38"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a33935643b71981b6a398a2ccd3d4c00b"><td class="memItemLeft" align="right" valign="top">QVariantMap&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMediaDB.html#a33935643b71981b6a398a2ccd3d4c00b">getList</a> (<a class="el" href="classMediaDB.html#ae7263037c6703d8e7c7adad301403242">ListType</a> listType)</td></tr>
<tr class="separator:a33935643b71981b6a398a2ccd3d4c00b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a99f7e9fe5d566eacfa545ae539111bde"><td class="memItemLeft" align="right" valign="top">QVariantMap&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMediaDB.html#a99f7e9fe5d566eacfa545ae539111bde">getListContent</a> (<a class="el" href="classMediaDB.html#ae7263037c6703d8e7c7adad301403242">ListType</a> listType, QString key)</td></tr>
<tr class="separator:a99f7e9fe5d566eacfa545ae539111bde"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-attribs"></a>
Static Public Attributes</h2></td></tr>
<tr class="memitem:ad7c417268e6fe9f10218f2874ae90b98"><td class="memItemLeft" align="right" valign="top">static const int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMediaDB.html#ad7c417268e6fe9f10218f2874ae90b98">AUDIO</a> = 1</td></tr>
<tr class="separator:ad7c417268e6fe9f10218f2874ae90b98"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0adb5b9557ca3a777811db9e34e7091d"><td class="memItemLeft" align="right" valign="top">static const int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMediaDB.html#a0adb5b9557ca3a777811db9e34e7091d">VIDEO</a> = 2</td></tr>
<tr class="separator:a0adb5b9557ca3a777811db9e34e7091d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5f0a6760319bc8285565e6d751df945d"><td class="memItemLeft" align="right" valign="top">static const int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMediaDB.html#a5f0a6760319bc8285565e6d751df945d">PLAYLIST</a> = 3</td></tr>
<tr class="separator:a5f0a6760319bc8285565e6d751df945d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Database abstraction class, used to fetch and insert/update data to/from the media library's SQLITE database. </p>
<p>QVariantMap and QVariantList is used as parameters and return types for convenience so we can easily pass data from and to QML The media library currently uses 3 tables: locations, scanned_folders and media_files. Their purpose are as follows:</p>
<h3>locations</h3>
<p>We store the locations that are added to the database. Locations are used as the root for media files that are scanned and added to the DB. To add a new location we have to first find the root for the partition its located at. The root of the partition will be stored in the 'volume_path' filed. Then we have to find a unique identifier for the partition which we will store in the 'volume_unique_id' field. The 'relative_path' is used to store the added locations path relative to the volume's root. This is done this way so if the mounting point for the drive changes we can change it simply without having to delete the location and completely rescan it. This will also help us later when implementing separated database files for each partition.</p>
<ul>
<li>name (text) - Used to store the drive label. This field is purely for display purposes.</li>
<li>relative_path (text) - The path to the location relative to the mounting point of the volume</li>
<li>volume_unique_id (text) - The UUID of the volume (on Linux this may be found in /dev/disk/by-uuid)</li>
<li>volume_path (text) - The path to the volume (on Linux this is the mount point on Windows its the drive letter)</li>
<li>is_present (integer) - This indicates whether if the volume is mounted and accessible or not. Possible values : 1 (true) | 0 (false). If this field is set to 0 the media files and folders from this location will be excluded from all queries.</li>
</ul>
<h3>scanned_folders</h3>
<p>This table is used to store the folders that were found and scanned within a location. The fields are used as follows:</p><ul>
<li>name (text) - The name of the folder</li>
<li>location_id (integer) - The foreign key for the location this folder is located in.</li>
<li>relative_path (text) - The path to the folder relative to the location path (this excludes the folder name)</li>
<li>last_modified (text) - The last modified stamp of the folder (currently not used)</li>
<li>has_audio (integer) - Indicates whether if there are any audio files directly in the folder. possible values : 1 (true) | 0 (false)</li>
<li>has_video (integer) - Indicates whether if there are any video files directly in the folder. possible values : 1 (true) | 0 (false)</li>
<li>thumbnail (text) - The name of the thumbnail image</li>
</ul>
<h3>media_files</h3>
<p>This table contains the media files that were found in the scanned folders.</p><ul>
<li>filename (text) - The name of the media file including the file type extension</li>
<li>folder_id (text) - The foreign key for the folder that contains the media file.</li>
<li>media_type (integer) - The media type id. Possible values are: 1 (AUDIO) | 2 (VIDEO) | 3 (PLAYLIST)</li>
<li>artist (text) (optional, only for audio files) - The performing artist of the audio file (parsed from i3d)</li>
<li>title (text) (optional, only for audio files) - The title of the audio file (parsed from i3d)</li>
<li>album (text) (optional, only for audio files) - The album of the audio file (parsed from i3d)</li>
<li>genre (text) (optional, only for audio files) - The genre of the audio file (parsed from i3d)</li>
</ul>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000001">Todo:</a></b></dt><dd><p class="startdd">Create separate SQLITE databases for each partition and store it in the volume root rather than a single file next to executable </p>
<p>Add favourites </p>
<p class="enddd">Add custom playlists</p>
</dd></dl>
</div><h2 class="groupheader">Member Enumeration Documentation</h2>
<a class="anchor" id="ae7263037c6703d8e7c7adad301403242"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="classMediaDB.html#ae7263037c6703d8e7c7adad301403242">MediaDB::ListType</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Contains all the possible list types that we can fetch from the database (albums,artists,genres) </p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000002">Todo:</a></b></dt><dd>Remove playlists and songs </dd></dl>

</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a824005492136de37c06c04dd6f0474b7"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">MediaDB::MediaDB </td>
          <td>(</td>
          <td class="paramtype">QObject *&#160;</td>
          <td class="paramname"><em>parent</em> = <code>0</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The constructor opens the SQLITE DB file and checks if all the tables are created, if not it creates them. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">parent</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="ad0dc39033efc3827c11d4816405cda04"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int MediaDB::addLocation </td>
          <td>(</td>
          <td class="paramtype">QString&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">QString&#160;</td>
          <td class="paramname"><em>v_unique_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">QString&#160;</td>
          <td class="paramname"><em>v_path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">QString&#160;</td>
          <td class="paramname"><em>relative_path</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Checks if a location already exits in the database and if not then adds the location to the database. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>Name of the location </td></tr>
    <tr><td class="paramname">v_unique_id</td><td>UUID of the volume the location is at </td></tr>
    <tr><td class="paramname">v_path</td><td>The path for the volume (mounting point or drive letter) </td></tr>
    <tr><td class="paramname">relative_path</td><td>The path to the location relative to the root of the partition </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns -1 if there is some error with accessing the database or binding values to the prepared statement, return -2 if the location exits. Otherwise it returns the ID of the newly created locations </dd></dl>

</div>
</div>
<a class="anchor" id="adf0ee613d999b16821693f1a4a77f3e6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int MediaDB::addMediaFiles </td>
          <td>(</td>
          <td class="paramtype">QVariantList&#160;</td>
          <td class="paramname"><em>filenames</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">QVariantList&#160;</td>
          <td class="paramname"><em>folder_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">QVariantList&#160;</td>
          <td class="paramname"><em>media_types</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">QVariantList&#160;</td>
          <td class="paramname"><em>artist</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">QVariantList&#160;</td>
          <td class="paramname"><em>title</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">QVariantList&#160;</td>
          <td class="paramname"><em>album</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">QVariantList&#160;</td>
          <td class="paramname"><em>genre</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">filenames</td><td>A list of filenames </td></tr>
    <tr><td class="paramname">folder_id</td><td>A list with the id of the folder the media files are located in </td></tr>
    <tr><td class="paramname">media_types</td><td>A list with the media type (<a class="el" href="classMediaDB.html#ad7c417268e6fe9f10218f2874ae90b98">AUDIO</a>, <a class="el" href="classMediaDB.html#a0adb5b9557ca3a777811db9e34e7091d">VIDEO</a>, <a class="el" href="classMediaDB.html#a5f0a6760319bc8285565e6d751df945d">PLAYLIST</a>) </td></tr>
    <tr><td class="paramname">artist</td><td>A list with artists for the scanned media (only used for audio, for other media types pass an empty string) </td></tr>
    <tr><td class="paramname">title</td><td>A list with titles for the scanned media (only used for audio, for other media types pass an empty string) </td></tr>
    <tr><td class="paramname">album</td><td>A list with albums for the scanned media (only used for audio, for other media types pass an empty string) </td></tr>
    <tr><td class="paramname">genre</td><td>A list with genres for the scanned media (only used for audio, for other media types pass an empty string) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns -1 if there is some error with accessing the database or binding values to the prepared statement. If the folder is added successfully it returns 0. </dd></dl>

</div>
</div>
<a class="anchor" id="a92c75270322cb73cbb468a1d592cd095"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int MediaDB::addScannedFolder </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>location_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">QString&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">QString&#160;</td>
          <td class="paramname"><em>relative_path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">qint64&#160;</td>
          <td class="paramname"><em>last_modified</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">QString&#160;</td>
          <td class="paramname"><em>thumbnail</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Checks if a folder is in the database if not then adds it to the DB. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">location_id</td><td></td></tr>
    <tr><td class="paramname">name</td><td></td></tr>
    <tr><td class="paramname">relative_path</td><td></td></tr>
    <tr><td class="paramname">last_modified</td><td></td></tr>
    <tr><td class="paramname">thumbnail</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns the ID of the folder matching the passed parameters (it queries the location and if it exists return its ID if it is not in the DB yet it creates it and then returns its ID). Returns -1 if there is some error with accessing the database or binding values to the prepared statement. </dd></dl>

</div>
</div>
<a class="anchor" id="a3121d1f7cc78d63aa9e1f6bb2468c6e7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">QVariantMap MediaDB::getAlbumContent </td>
          <td>(</td>
          <td class="paramtype">QString&#160;</td>
          <td class="paramname"><em>album</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">album</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>QVariantMap </dd></dl>

</div>
</div>
<a class="anchor" id="ab32bf04bcd405c375b33dee4ba0c7c38"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">QVariantMap MediaDB::getAudioFiles </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>QVariantMap </dd></dl>

</div>
</div>
<a class="anchor" id="a3d5f173f59152f8946f8f20055646121"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">QVariantMap MediaDB::getFolderContent </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>folder_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>mediaType</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">folder_id</td><td></td></tr>
    <tr><td class="paramname">mediaType</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>QVariantMap </dd></dl>

</div>
</div>
<a class="anchor" id="a33935643b71981b6a398a2ccd3d4c00b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">QVariantMap MediaDB::getList </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classMediaDB.html#ae7263037c6703d8e7c7adad301403242">ListType</a>&#160;</td>
          <td class="paramname"><em>listType</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">listType</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>QVariantMap </dd></dl>

</div>
</div>
<a class="anchor" id="a99f7e9fe5d566eacfa545ae539111bde"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">QVariantMap MediaDB::getListContent </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classMediaDB.html#ae7263037c6703d8e7c7adad301403242">ListType</a>&#160;</td>
          <td class="paramname"><em>listType</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">QString&#160;</td>
          <td class="paramname"><em>key</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">listType</td><td></td></tr>
    <tr><td class="paramname">key</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>QVariantMap </dd></dl>

</div>
</div>
<a class="anchor" id="a2b6f7a12d03a68aced1f112e4cb439b4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">QVariantList MediaDB::getListFromQuery </td>
          <td>(</td>
          <td class="paramtype">QSqlQuery&#160;</td>
          <td class="paramname"><em>q</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">q</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>QVariantList </dd></dl>

</div>
</div>
<a class="anchor" id="a1d86a641a8f9650874782ce5c88f680d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">QVariantMap MediaDB::getListWithFirstLetterFromQuery </td>
          <td>(</td>
          <td class="paramtype">QSqlQuery&#160;</td>
          <td class="paramname"><em>q</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">q</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>QVariantMap </dd></dl>

</div>
</div>
<a class="anchor" id="a2ffc4c0a0aa8a800b86a7a5752d65704"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">QVariantMap MediaDB::getLocationInfo </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>location_id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Fetches the info for the location that matches location_id. </p>
<p>The structure of the map is the following : </p><pre class="fragment">{
    name : QString,
    relative_path: QString,
    volume_path: QString
}
</pre><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">location_id</td><td>The id of the record to fetch </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns an associative array (QVariantMap) with location info. If there isn't a matching record for location_id or there is an error with the query it returns an empty QVariantMap </dd></dl>

</div>
</div>
<a class="anchor" id="a013254caf712e65c99e51a7d46e0cb36"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">QVariantList MediaDB::getLocations </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>onlyAvailable</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">onlyAvailable</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>QVariantList </dd></dl>

</div>
</div>
<a class="anchor" id="af4148bffdd4a45a6712643fc109daf30"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">QVariantMap MediaDB::getMediaFolders </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>mediaType</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mediaType</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>QVariantMap </dd></dl>

</div>
</div>
<a class="anchor" id="a324db8f8d66f0901539b8f9b310b0a2c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">QVariantMap MediaDB::getPlaylists </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>QVariantMap </dd></dl>

</div>
</div>
<a class="anchor" id="ac2a2eac810025752bd8daec019d0a417"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int MediaDB::setLocationAvailability </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>location_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>isAvailable</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the availability of location_id to isAvailable. </p>
<p>When the availability of a location is set to true the media files and folders from that location will show up on all the lists ...etc, set the availability of a location to false whenever it is unmounted/not available and it won't cause any error for the media player. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">location_id</td><td></td></tr>
    <tr><td class="paramname">isAvailable</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>If the location availability is successfully updated it returns 0. If there is an SQL error it returns -1. </dd></dl>

</div>
</div>
<a class="anchor" id="aae363c424571e52b6f4aee2aa976cb12"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int MediaDB::updateFolderInfo </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>folder_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>hasAudio</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>hasVideo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">QString&#160;</td>
          <td class="paramname"><em>thumbnail</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Updates the has_audio, has_video and thumbnail fields for the folder matched by folder_id. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">folder_id</td><td></td></tr>
    <tr><td class="paramname">hasAudio</td><td></td></tr>
    <tr><td class="paramname">hasVideo</td><td></td></tr>
    <tr><td class="paramname">thumbnail</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>If the row with location_id is successfully updated it returns 0. If there is an SQL error it returns -1. </dd></dl>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="ad7c417268e6fe9f10218f2874ae90b98"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const int MediaDB::AUDIO = 1</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Media type id used for AUDIO files </p>

</div>
</div>
<a class="anchor" id="a5f0a6760319bc8285565e6d751df945d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const int MediaDB::PLAYLIST = 3</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Media type id used for PLAYLIST files </p>

</div>
</div>
<a class="anchor" id="a0adb5b9557ca3a777811db9e34e7091d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const int MediaDB::VIDEO = 2</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Media type id used for VIDEO files </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="mediadb_8h_source.html">mediadb.h</a></li>
<li>mediadb.cpp</li>
</ul>
</div><!-- contents -->
<!-- HTML footer for doxygen 1.8.8-->
<!-- start footer part -->
</div>
</div>
</div>
</div>
</div>
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
